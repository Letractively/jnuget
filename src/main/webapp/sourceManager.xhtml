<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>Хранилища пакетов</title>
        <link rel="stylesheet" type="text/css" href="/css/main.css" />
    </h:head>
    <h:body> 
        <br>Домашняя папка NuGet: <h:outputText id="rootFolder" value="#{storagesList.nugetHome}"/></br>
        <br>Всего источников пакетов: <h:outputText id="nameText" value="#{storagesList.repositoriesCount}"/></br>
        <h:dataTable value="#{storagesList.storageOptions}" var="repo">
            <h:column>
                <f:facet name="header">№</f:facet> 
                <c:choose>
                    <c:when test="#{facesContext.externalContext.isUserInRole('Administrator')}">
                        <h:link value="#{storagesList.storageOptions.rowIndex+1}" outcome="storageOptions">
                            <f:param name="storageId" value="#{storagesList.storageOptions.rowIndex}"/>
                        </h:link>
                    </c:when>
                    <c:otherwise>
                        <h:outputText value="#{storagesList.storageOptions.rowIndex+1}"/>
                    </c:otherwise>
                </c:choose>
            </h:column>
            <h:column>
                <f:facet name="header">Класс хранилища</f:facet>                
                <h:outputText value="#{repo.getClassName()}"/>
            </h:column>
            <h:column>                
                <f:facet name="header">Индексируемое (Y/N)</f:facet>   
                <h:outputText value="#{repo.isIndexed()}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Имя хранилища</f:facet>
                <h:outputText value="#{repo.getStorageName()}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Интервал обновления индекса</f:facet> 
                <h:outputText value="#{repo.getRefreshInterval()}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Содержимое</f:facet> 
                <h:link value="Содержимое" outcome="storageContents">
                    <f:param name="storageId" value="#{storagesList.storageOptions.rowIndex}"/>
                </h:link>
            </h:column>
        </h:dataTable>        
        <h:link value="Создать..." outcome="storageOptions"/>
    </h:body>
</html>

