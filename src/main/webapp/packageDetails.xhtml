<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a="http://aristar.ru/components">
    <h:head>
        <f:metadata>
            <f:viewParam name="storageId" value="#{packageDetails.storageId}"/>
            <f:viewParam name="packageId" value="#{packageDetails.packageId}"/>
            <f:viewParam name="packageVersion" value="#{packageDetails.packageVersion}"/>
            <f:event type="preRenderView" listener="#{packageDetails.init()}" />
        </f:metadata>
        <title> <h:outputText value="Детальная информация о пакете #{packageDetails.packageId} #{packageDetails.packageVersion}"/></title>
    </h:head>
    <h:body>
        <ui:composition template="common/commonLayout.xhtml">
            <ui:define name="content">
                <h:graphicImage value="#{packageDetails.iconUrl}"/>
                <ul>
                    <li><h:outputText value="Идентификатор пакета #{packageDetails.packageId}"/> </li>
                    <li><h:outputText value="Версия пакета #{packageDetails.packageVersion}"/> </li>
                    <li><h:outputText value="Описание пакета #{packageDetails.description}"/> </li>
                    <li><h:outputText value="Размер пакета #{packageDetails.size} Мб"/> </li>
                    <li><h:outputText value="Заголовок пакета #{packageDetails.title}"/></li>
                    <li><h:outputText value="Авторы пакета #{packageDetails.authors}"/></li>
                    <li><h:outputText value="Владельцы пакета #{packageDetails.owners}"/></li>
                    <li><h:outputLink  value="#{packageDetails.projectUrl}">URL проекта</h:outputLink></li>
                    <li><h:outputText value="Примечания к релизу #{packageDetails.releaseNotes}"/></li>
                    <li>
                        <label for="requireLicenseAcceptance">Требуется подтверждение лицензии</label>
                        <h:selectBooleanCheckbox id="requireLicenseAcceptance" value="#{packageDetails.requireLicenseAcceptance}"/>
                    </li>
                    <li><h:outputLink  value="#{packageDetails.licenseUrl}">URL лицензии</h:outputLink></li>
                    <li><h:outputText value="Аннотация #{packageDetails.summary}"/></li>
                    <li><h:outputText value="Права #{packageDetails.copyright}"/></li>
                    <li><h:outputText value="Локализация #{packageDetails.language}"/></li>
                    <li><h:outputText value="Теги #{packageDetails.tags}"/></li>
                    <li>                       
                        <h:outputText value="Структура пакета"/>
                        <a:tree rootNode="#{packageDetails.rootFileNode}" var="node" showRoot="#{false}">
                            <h:outputText value="#{node.name}"/>
                        </a:tree>
                    </li>
                    <li>
                        <h:outputText value="Зависимости"/>
                        <h:dataTable value="#{packageDetails.dependencies}" var="dependency">
                            <h:column>
                                <f:facet name="header">№</f:facet>
                                <h:outputText value="#{packageDetails.dependencies.rowIndex+1}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">Id</f:facet>
                                <h:link value="#{dependency.id}" outcome="storageContents">
                                    <f:param name="storageId" value="-1"/>
                                    <f:param name="packageId" value="#{dependency.id}"/>
                                </h:link>
                            </h:column>
                            <h:column>
                                <f:facet name="header">Versions</f:facet>
                                <h:outputText value="#{dependency.versionRangeString}"/>
                            </h:column>
                        </h:dataTable>
                    </li>
                </ul>
                <a href="#{packageDetails.rootUrl}/nuget/download/#{packageDetails.packageId}/#{packageDetails.packageVersion}">Закачать</a>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

